<div class="card">
    <div class="skill-header" style="margin-bottom: 1rem;">
        <div>
            <h1>{{skill.full_name}}</h1>
            <p style="font-size: 1.1rem; color: #666; margin: 0.5rem 0;">{{skill.description}}</p>
        </div>
        <div style="text-align: right;">
            <div class="skill-version" style="margin-bottom: 0.5rem;">v{{skill.version}}</div>
            <div class="score" style="font-size: 1.2rem;">‚òÖ {{skill.score}}</div>
        </div>
    </div>
    
    <div class="skill-meta" style="margin-bottom: 2rem;">
        <div>
            {{#each skill.capabilities}}
            <span class="capability">{{this}}</span>
            {{/each}}
        </div>
        <div style="margin-left: auto; text-align: right;">
            <div><strong>{{skill.star_count}}</strong> stars</div>
            {{#if skill.zap_total_sats}}
            <div><strong>‚ö° {{skill.zap_total_sats}}</strong> sats</div>
            {{/if}}
            <div>Updated {{skill.updated_at}}</div>
        </div>
    </div>
    
    {{#if skill.api_base}}
    <div style="background: #e3f2fd; padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
        <strong>API Base:</strong> <a href="{{skill.api_base}}" target="_blank">{{skill.api_base}}</a>
    </div>
    {{/if}}
    
    {{#if skill.homepage}}
    <div style="background: #f3e5f5; padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
        <strong>Homepage:</strong> <a href="{{skill.homepage}}" target="_blank">{{skill.homepage}}</a>
    </div>
    {{/if}}
    
    <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
        {{#if skill.repo_url}}
        <a href="{{skill.repo_url}}" target="_blank" class="btn">üì¶ View Source</a>
        {{/if}}
        <a href="{{skill.agent_card_url}}" target="_blank" class="btn">üîó A2A Agent Card</a>
        <button id="starBtn" class="btn btn-success">‚≠ê Star Skill</button>
    </div>
</div>

{{#if skill.skill_md}}
<div class="card">
    <h2>Documentation</h2>
    <div id="skillDocs" style="line-height: 1.8;">
        <pre style="white-space: pre-wrap; background: #f8f9fa; padding: 1.5rem; border-radius: 6px; overflow-x: auto;">{{skill.skill_md_content}}</pre>
    </div>
</div>
{{/if}}

<div class="card">
    <h2>Integration</h2>
    
    <h3>cURL</h3>
    <pre style="background: #f8f9fa; padding: 1rem; border-radius: 6px; overflow-x: auto;"><code># Star this skill
curl -X POST https://clawhub.dev/api/v1/skills/{{skill.full_name}}/star \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"zap_sats": 100}'</code></pre>
    
    <h3>A2A Agent Card</h3>
    <pre style="background: #f8f9fa; padding: 1rem; border-radius: 6px; overflow-x: auto;"><code># Get A2A Agent Card
curl https://clawhub.dev/api/v1/skills/{{skill.full_name}}/.well-known/agent-card.json</code></pre>
    
    {{#if skill.capabilities}}
    <h3>Capabilities</h3>
    <ul>
        {{#each skill.capabilities}}
        <li><strong>{{this}}</strong></li>
        {{/each}}
    </ul>
    {{/if}}
    
    {{#if skill.dependencies}}
    <h3>Dependencies</h3>
    <ul>
        {{#each skill.dependencies}}
        <li><code>{{this}}</code></li>
        {{/each}}
    </ul>
    {{/if}}
</div>

<script>
const skillData = {{{skill_json}}};

document.getElementById('starBtn').addEventListener('click', async () => {
    const apiKey = prompt('Enter your API key to star this skill:');
    if (!apiKey) return;
    
    const zapSats = prompt('Optional: Enter sats to zap (leave empty for 0):') || '0';
    
    try {
        const response = await fetch(`/api/v1/skills/{{skill.full_name}}/star`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${apiKey}`,
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                zap_sats: parseInt(zapSats) || 0
            }),
        });
        
        const result = await response.json();
        
        if (response.ok) {
            alert(`‚úÖ ${result.message}\nNew score: ${result.score}`);
            location.reload(); // Refresh to show updated stats
        } else {
            alert(`‚ùå Error: ${result.error}`);
        }
    } catch (err) {
        alert(`‚ùå Error: ${err.message}`);
    }
});
</script>

<style>
.skill-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.skill-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

@media (max-width: 768px) {
    .skill-header {
        flex-direction: column;
        gap: 1rem;
    }
    
    .skill-meta {
        flex-direction: column;
        align-items: flex-start;
    }
}
</style>